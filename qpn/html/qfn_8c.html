<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP-nano: qfn.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a id="logo" title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com"></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QP-nano
   &#160;<span id="projectnumber">6.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('qfn_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">qfn.c File Reference<div class="ingroups"><a class="el" href="group__qfn.html">QF-nano</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>QF-nano implementation.
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="qpn__conf_8h_source.html">qpn_conf.h</a>&quot;</code><br />
<code>#include &quot;qfn_port.h&quot;</code><br />
<code>#include &quot;<a class="el" href="qassert_8h_source.html">qassert.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qfn.c:</div>
<div class="dyncontent">
<div class="center"><img src="qfn_8c__incl.png" border="0" usemap="#qfn_8c" alt=""/></div>
<map name="qfn_8c" id="qfn_8c">
<area shape="rect" title="QF&#45;nano implementation." alt="" coords="129,5,180,32"/>
<area shape="rect" href="qpn__conf_8h.html" title="QP&#45;nano configuration file." alt="" coords="5,80,91,107"/>
<area shape="rect" title=" " alt="" coords="115,80,194,107"/>
<area shape="rect" href="qassert_8h.html" title="Customizable and memory&#45;efficient assertions for embedded systems." alt="" coords="218,80,294,107"/>
</map>
</div>
</div>
<p><a href="qfn_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a13edf5eeb78176195720ac88bf70b3ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#a13edf5eeb78176195720ac88bf70b3ef">QActive_ctor</a> (<a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const me, <a class="el" href="qepn_8h.html#ab3ae5008a861e90f8b2c3c36e83ce478">QStateHandler</a> initial)</td></tr>
<tr class="memdesc:a13edf5eeb78176195720ac88bf70b3ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">protected "constructor" of an <a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> active object.  <a href="qfn_8c.html#a13edf5eeb78176195720ac88bf70b3ef">More...</a><br /></td></tr>
<tr class="separator:a13edf5eeb78176195720ac88bf70b3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a391b212c88303102ce22884bf6813fae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#a391b212c88303102ce22884bf6813fae">QActive_postX_</a> (<a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const me, <a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> margin, <a class="el" href="qepn_8h.html#ad11e2d4dff3c15b0b5f9a13a47c7fb1a">enum_t</a> const sig, <a class="el" href="qepn_8h.html#a80db39e0a2a5e5bca13a19081cde7310">QParam</a> const par)</td></tr>
<tr class="memdesc:a391b212c88303102ce22884bf6813fae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the task-level event posting.  <a href="qfn_8c.html#a391b212c88303102ce22884bf6813fae">More...</a><br /></td></tr>
<tr class="separator:a391b212c88303102ce22884bf6813fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb1add491f26a0d25cc7bec29758d4a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#afb1add491f26a0d25cc7bec29758d4a4">QActive_postXISR_</a> (<a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const me, <a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> margin, <a class="el" href="qepn_8h.html#ad11e2d4dff3c15b0b5f9a13a47c7fb1a">enum_t</a> const sig, <a class="el" href="qepn_8h.html#a80db39e0a2a5e5bca13a19081cde7310">QParam</a> const par)</td></tr>
<tr class="memdesc:afb1add491f26a0d25cc7bec29758d4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the ISR-level event posting.  <a href="qfn_8c.html#afb1add491f26a0d25cc7bec29758d4a4">More...</a><br /></td></tr>
<tr class="separator:afb1add491f26a0d25cc7bec29758d4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e56e284f4f0336a56f5ea8e6520295e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#a1e56e284f4f0336a56f5ea8e6520295e">QF_init</a> (<a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> maxActive)</td></tr>
<tr class="memdesc:a1e56e284f4f0336a56f5ea8e6520295e"><td class="mdescLeft">&#160;</td><td class="mdescRight">QF-nano initialization.  <a href="qfn_8c.html#a1e56e284f4f0336a56f5ea8e6520295e">More...</a><br /></td></tr>
<tr class="separator:a1e56e284f4f0336a56f5ea8e6520295e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f78cdad2d12bbbd2fc584bab1c56c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#a48f78cdad2d12bbbd2fc584bab1c56c2">QF_tickXISR</a> (<a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> const tickRate)</td></tr>
<tr class="memdesc:a48f78cdad2d12bbbd2fc584bab1c56c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes all armed time events at every clock tick.  <a href="qfn_8c.html#a48f78cdad2d12bbbd2fc584bab1c56c2">More...</a><br /></td></tr>
<tr class="separator:a48f78cdad2d12bbbd2fc584bab1c56c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc1b10b5546d6441a823da4867f4692"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#adbc1b10b5546d6441a823da4867f4692">QActive_armX</a> (<a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const me, <a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> const tickRate, <a class="el" href="qfn_8h.html#a4c9ee418dab7af7004cfd9ebbb5bc8f5">QTimeEvtCtr</a> const nTicks, <a class="el" href="qfn_8h.html#a4c9ee418dab7af7004cfd9ebbb5bc8f5">QTimeEvtCtr</a> const interval)</td></tr>
<tr class="memdesc:adbc1b10b5546d6441a823da4867f4692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arm the QP-nano one-shot time event.  <a href="qfn_8c.html#adbc1b10b5546d6441a823da4867f4692">More...</a><br /></td></tr>
<tr class="separator:adbc1b10b5546d6441a823da4867f4692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc54c1c6578d6cb53e2c8dd36370e3da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#acc54c1c6578d6cb53e2c8dd36370e3da">QActive_disarmX</a> (<a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const me, <a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> const tickRate)</td></tr>
<tr class="memdesc:acc54c1c6578d6cb53e2c8dd36370e3da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disarm a time event.  <a href="qfn_8c.html#acc54c1c6578d6cb53e2c8dd36370e3da">More...</a><br /></td></tr>
<tr class="separator:acc54c1c6578d6cb53e2c8dd36370e3da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a20ce310ce2ae2fea8db90609091c716e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#a20ce310ce2ae2fea8db90609091c716e">QF_maxActive_</a></td></tr>
<tr class="memdesc:a20ce310ce2ae2fea8db90609091c716e"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of active objects in the application (# elements in QF_active[])  <a href="qfn_8c.html#a20ce310ce2ae2fea8db90609091c716e">More...</a><br /></td></tr>
<tr class="separator:a20ce310ce2ae2fea8db90609091c716e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206fde6616e95338e4c7647c7731563f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#a206fde6616e95338e4c7647c7731563f">QF_readySet_</a></td></tr>
<tr class="memdesc:a206fde6616e95338e4c7647c7731563f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ready set of QF-nano.  <a href="qfn_8c.html#a206fde6616e95338e4c7647c7731563f">More...</a><br /></td></tr>
<tr class="separator:a206fde6616e95338e4c7647c7731563f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae867b998c1825bc2e8b6cd0d1472afc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#ae867b998c1825bc2e8b6cd0d1472afc3">QF_timerSetX_</a> [<a class="el" href="qfn_8h.html#a2b5eb0c96105f58726359f4fcfae9530">QF_MAX_TICK_RATE</a>]</td></tr>
<tr class="memdesc:ae867b998c1825bc2e8b6cd0d1472afc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer set of QF-nano.  <a href="qfn_8c.html#ae867b998c1825bc2e8b6cd0d1472afc3">More...</a><br /></td></tr>
<tr class="separator:ae867b998c1825bc2e8b6cd0d1472afc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3858ca07b0233cb8d969680d13ae2ac"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="qkn_2qfn__port_8h.html#a4f4cc7253c4d809b326498b40efd66d3">Q_ROM</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfn_8c.html#aa3858ca07b0233cb8d969680d13ae2ac">QF_log2Lkup</a> [16]</td></tr>
<tr class="memdesc:aa3858ca07b0233cb8d969680d13ae2ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup table for (log2(n) + 1), where n is the index into the table.  <a href="qfn_8c.html#aa3858ca07b0233cb8d969680d13ae2ac">More...</a><br /></td></tr>
<tr class="separator:aa3858ca07b0233cb8d969680d13ae2ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>QF-nano implementation. </p>

<p class="definition">Definition in file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a13edf5eeb78176195720ac88bf70b3ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13edf5eeb78176195720ac88bf70b3ef">&#9670;&nbsp;</a></span>QActive_ctor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QActive_ctor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qepn_8h.html#ab3ae5008a861e90f8b2c3c36e83ce478">QStateHandler</a>&#160;</td>
          <td class="paramname"><em>initial</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>protected "constructor" of an <a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> active object. </p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> inherits <a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a>, so by the <a class="el" href="index.html#oop">Object Orientation</a> convention it should call the constructor of the superclass, i.e., <a class="el" href="qfn_8c.html#a13edf5eeb78176195720ac88bf70b3ef" title="protected &quot;constructor&quot; of an QActive active object.">QActive_ctor()</a>. However, this would pull in the <a class="el" href="struct_q_active_vtable.html" title="Virtual table for the QActive class.">QActiveVtable</a>, which in turn will pull in the code for <a class="el" href="qepn_8h.html#abce9d9232e53dc4f4dda0b410d592c9d" title="Implementation of the top-most initial transition in QHsm.">QHsm_init_()</a> and <a class="el" href="qepn_8h.html#ad29c2bfe203bc9e7415ca340e30da4ee" title="Implementation of dispatching events to QHsm.">QHsm_dispatch_()</a> implemetations, which is expensive. To avoid this code size penalty, in case <a class="el" href="qepn_8h.html#struct_q_hsm" title="Hierarchical State Machine.">QHsm</a> is not used in a given project, the call to <a class="el" href="qepn_8h.html#a3e1d1635d8a7f2247272bb425d8839b8" title="protected &quot;constructor&quot; of a HSM.">QHsm_ctor()</a> avoids pulling in the code for <a class="el" href="qepn_8h.html#struct_q_hsm" title="Hierarchical State Machine.">QHsm</a>.</dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00096">96</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="a391b212c88303102ce22884bf6813fae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a391b212c88303102ce22884bf6813fae">&#9670;&nbsp;</a></span>QActive_postX_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> QActive_postX_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a>&#160;</td>
          <td class="paramname"><em>margin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qepn_8h.html#ad11e2d4dff3c15b0b5f9a13a47c7fb1a">enum_t</a> const&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qepn_8h.html#a80db39e0a2a5e5bca13a19081cde7310">QParam</a> const&#160;</td>
          <td class="paramname"><em>par</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the task-level event posting. </p>
<dl class="section user"><dt>Description</dt><dd>Direct event posting is the simplest asynchronous communication method available in QF-nano.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>This function should be called only via the macro <a class="el" href="qfn_8h.html#ac41ac57f925509fc92f9b3612f8c03b5" title="Polymorphically posts an event to an active object (FIFO) with delivery guarantee (task context).">QACTIVE_POST()</a> or <a class="el" href="qfn_8h.html#ae00de7cd5eab428566fb510ed63fac6b" title="Polymorphically posts an event to an active object (FIFO) without delivery guarantee (task context).">QACTIVE_POST_X()</a>. This function should be only used in the <b>task</b> context.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">Object Orientation</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">margin</td><td>number of required free slots in the queue after posting the event. The special value <a class="el" href="qfn_8h.html#a3c1957439cb1ecff92be7b7401bf3159" title="special value of margin that causes asserting failure in case event posting fails.">QF_NO_MARGIN</a> means that this function will assert if posting fails. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sig</td><td>signal of the event to be posted </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">par</td><td>parameter of the event to be posted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Usage</dt><dd><div class="fragment"><div class="line"><span class="comment">/* &quot;extended&quot; event posting from the interrupt context (QACTIVE_POST_X_ISR) */</span></div>
<div class="line"><span class="keywordtype">void</span> SysTick_Handler(<span class="keywordtype">void</span>) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="qfn_8h.html#afedb154580e5291936106181d89f84e4">QACTIVE_POST_X_ISR</a>((<a class="code" href="qfn_8h.html#struct_q_active">QActive</a> *)&amp;AO_Cruncher,</div>
<div class="line">             5U,            <span class="comment">/* margin of free slots in the queue */</span></div>
<div class="line">             ECHO_SIG, 0U)) <span class="comment">/* signal and parameter */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* event posting failed... */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* &quot;extended&quot; event posting from the task context (QACTIVE_POST_X())... */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> Ship_flying(Ship * <span class="keyword">const</span> me) {</div>
<div class="line">    <a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (<a class="code" href="qepn_8h.html#aa094e6aed843e73b91fc3879e79139d5">Q_SIG</a>(me)) {</div>
<div class="line">        <span class="keywordflow">case</span> TIME_TICK_SIG: {</div>
<div class="line">            . . .</div>
<div class="line">            <span class="keywordflow">if</span> ((me-&gt;score % 10) == 0) { <span class="comment">/* is the score &quot;round&quot;? */</span></div>
<div class="line">                <span class="keywordflow">if</span> (!<a class="code" href="qfn_8h.html#ae00de7cd5eab428566fb510ed63fac6b">QACTIVE_POST_X</a>((<a class="code" href="qfn_8h.html#struct_q_active">QActive</a> *)&amp;AO_Tunnel,</div>
<div class="line">                        4U, <span class="comment">/* margin of free slots in the queue */</span></div>
<div class="line">                        SCORE_SIG, me-&gt;score)) <span class="comment">/* signal and parameter */</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">/* event posting failed... */</span></div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        . . .</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00139">139</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="afb1add491f26a0d25cc7bec29758d4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb1add491f26a0d25cc7bec29758d4a4">&#9670;&nbsp;</a></span>QActive_postXISR_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> QActive_postXISR_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a>&#160;</td>
          <td class="paramname"><em>margin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qepn_8h.html#ad11e2d4dff3c15b0b5f9a13a47c7fb1a">enum_t</a> const&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qepn_8h.html#a80db39e0a2a5e5bca13a19081cde7310">QParam</a> const&#160;</td>
          <td class="paramname"><em>par</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the ISR-level event posting. </p>
<dl class="section user"><dt>Description</dt><dd>Direct event posting is the simplest asynchronous communication method available in QF-nano.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>This function should be called only via the macro <a class="el" href="qfn_8h.html#ae87ff71293fcaf377be03122512ef95e" title="Polymorphically posts an event to an active object (FIFO) with delivery guarantee (ISR context).">QACTIVE_POST_ISR()</a> or <a class="el" href="qfn_8h.html#afedb154580e5291936106181d89f84e4" title="Polymorphically posts an event to an active object (FIFO) without delivery guarantee (ISR context).">QACTIVE_POST_X_ISR()</a>. This function should be only used in the <b>ISR</b> context.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">Object Orientation</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">margin</td><td>number of required free slots in the queue after posting the event. The special value <a class="el" href="qfn_8h.html#a3c1957439cb1ecff92be7b7401bf3159" title="special value of margin that causes asserting failure in case event posting fails.">QF_NO_MARGIN</a> means that this function will assert if posting fails. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sig</td><td>signal of the event to be posted </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">par</td><td>parameter of the event to be posted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Usage</dt><dd><div class="fragment"><div class="line"><span class="comment">/* &quot;extended&quot; event posting from the interrupt context (QACTIVE_POST_X_ISR) */</span></div>
<div class="line"><span class="keywordtype">void</span> SysTick_Handler(<span class="keywordtype">void</span>) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="qfn_8h.html#afedb154580e5291936106181d89f84e4">QACTIVE_POST_X_ISR</a>((<a class="code" href="qfn_8h.html#struct_q_active">QActive</a> *)&amp;AO_Cruncher,</div>
<div class="line">             5U,            <span class="comment">/* margin of free slots in the queue */</span></div>
<div class="line">             ECHO_SIG, 0U)) <span class="comment">/* signal and parameter */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* event posting failed... */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* &quot;extended&quot; event posting from the task context (QACTIVE_POST_X())... */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> Ship_flying(Ship * <span class="keyword">const</span> me) {</div>
<div class="line">    <a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (<a class="code" href="qepn_8h.html#aa094e6aed843e73b91fc3879e79139d5">Q_SIG</a>(me)) {</div>
<div class="line">        <span class="keywordflow">case</span> TIME_TICK_SIG: {</div>
<div class="line">            . . .</div>
<div class="line">            <span class="keywordflow">if</span> ((me-&gt;score % 10) == 0) { <span class="comment">/* is the score &quot;round&quot;? */</span></div>
<div class="line">                <span class="keywordflow">if</span> (!<a class="code" href="qfn_8h.html#ae00de7cd5eab428566fb510ed63fac6b">QACTIVE_POST_X</a>((<a class="code" href="qfn_8h.html#struct_q_active">QActive</a> *)&amp;AO_Tunnel,</div>
<div class="line">                        4U, <span class="comment">/* margin of free slots in the queue */</span></div>
<div class="line">                        SCORE_SIG, me-&gt;score)) <span class="comment">/* signal and parameter */</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">/* event posting failed... */</span></div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        . . .</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00224">224</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="a1e56e284f4f0336a56f5ea8e6520295e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e56e284f4f0336a56f5ea8e6520295e">&#9670;&nbsp;</a></span>QF_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QF_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a>&#160;</td>
          <td class="paramname"><em>maxActive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QF-nano initialization. </p>
<dl class="section user"><dt>Description</dt><dd>The function <a class="el" href="qfn_8c.html#a1e56e284f4f0336a56f5ea8e6520295e" title="QF-nano initialization.">QF_init()</a> initializes the number of active objects to be managed by the framework and clears the internal QF-nano variables as well as all registered active objects to zero, which is needed in case when the startup code does not clear the uninitialized data (in violation of the C Standard).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The intended use of the function is to call as follows: QF_init(Q_DIM(QF_active)); </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>the number of active objects must be in range</dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00310">310</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="a48f78cdad2d12bbbd2fc584bab1c56c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f78cdad2d12bbbd2fc584bab1c56c2">&#9670;&nbsp;</a></span>QF_tickXISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QF_tickXISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> const&#160;</td>
          <td class="paramname"><em>tickRate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes all armed time events at every clock tick. </p>
<dl class="section user"><dt>Description</dt><dd>This function must be called periodically from a time-tick ISR or from an ISR so that QF-nano can manage the timeout events assigned to the given system clock tick rate.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tickRate</td><td>system clock tick rate serviced in this call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Each system tick rate posts timeout events with a different signal as follows:<br  />
tickRate==0 Q_TIMEOUT_SIG<br  />
tickRate==1 Q_TIMEOUT1_SIG<br  />
tickRate==2 Q_TIMEOUT2_SIG<br  />
tickRate==3 Q_TIMEOUT3_SIG</dd>
<dd>
The calls to <a class="el" href="qfn_8c.html#a48f78cdad2d12bbbd2fc584bab1c56c2" title="Processes all armed time events at every clock tick.">QF_tickXISR()</a> with different tick rate parameter can preempt each other. For example, higher clock tick rates might be serviced from interrupts that can preempt lower-priority interrupts. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00393">393</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="adbc1b10b5546d6441a823da4867f4692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbc1b10b5546d6441a823da4867f4692">&#9670;&nbsp;</a></span>QActive_armX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QActive_armX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> const&#160;</td>
          <td class="paramname"><em>tickRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#a4c9ee418dab7af7004cfd9ebbb5bc8f5">QTimeEvtCtr</a> const&#160;</td>
          <td class="paramname"><em>nTicks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#a4c9ee418dab7af7004cfd9ebbb5bc8f5">QTimeEvtCtr</a> const&#160;</td>
          <td class="paramname"><em>interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arm the QP-nano one-shot time event. </p>
<dl class="section user"><dt>Description</dt><dd>Arms a time event to fire in a specified number of clock ticks at the specified tick rate. The timeout signal gets directly posted (using the FIFO policy) into the event queue of the active object calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">Object Orientation</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tickRate</td><td>tick rate . </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nTicks</td><td>number of clock ticks (at the associated rate) to rearm the time event with.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Each system tick rate posts timeout events with a different signal as follows:<br  />
tickRate==0 Q_TIMEOUT_SIG<br  />
tickRate==1 Q_TIMEOUT1_SIG<br  />
tickRate==2 Q_TIMEOUT2_SIG<br  />
tickRate==3 Q_TIMEOUT3_SIG</dd>
<dd>
After posting, a one-shot time event gets automatically disarmed.</dd>
<dd>
A time event can be disarmed at any time by calling the <a class="el" href="qfn_8c.html#acc54c1c6578d6cb53e2c8dd36370e3da" title="Disarm a time event.">QActive_disarmX()</a> function.</dd></dl>
<dl class="section user"><dt>Usage</dt><dd>The following example shows how to arm a time event from a state machine of an active object: <div class="fragment"><div class="line"><span class="comment">/* when #QF_TIMEEVT_PERIODIC is NOT defined... */</span></div>
<div class="line"><a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> Pelican_carsGreen(Pelican * <span class="keyword">const</span> me) {</div>
<div class="line">    <a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (<a class="code" href="qepn_8h.html#aa094e6aed843e73b91fc3879e79139d5">Q_SIG</a>(me)) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="qepn_8h.html#aa6dc9adf3f51310aa41685019829374b">Q_ENTRY_SIG</a>: {</div>
<div class="line">            <span class="comment">/* arm timer (one-shot) at tick rate 0 */</span></div>
<div class="line">            <a class="code" href="qfn_8h.html#adbc1b10b5546d6441a823da4867f4692">QActive_armX</a>(&amp;me-&gt;super, 0U,</div>
<div class="line">                         CARS_GREEN_MIN_TOUT);</div>
<div class="line">            BSP_signalCars(CARS_GREEN);</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="qepn_8h.html#a6cf79ec599f6d7870aafe06c71de79be">Q_EXIT_SIG</a>: {</div>
<div class="line">            QActive_disarm(&amp;me-&gt;super)</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            break;</div>
<div class="line">        }</div>
<div class="line">        case <a class="code" href="qepn_8h.html#ab1a3d74abc659d49b63453c981aace18">Q_INIT_SIG</a>: {</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a>(&amp;Pelican_carsGreenNoPed);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">default</span>: {</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc">Q_SUPER</a>(&amp;Pelican_carsEnabled);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* when #QF_TIMEEVT_PERIODIC is defined... */</span></div>
<div class="line"><a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> Pelican_carsGreen(Pelican * <span class="keyword">const</span> me) {</div>
<div class="line">    <a class="code" href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (<a class="code" href="qepn_8h.html#aa094e6aed843e73b91fc3879e79139d5">Q_SIG</a>(me)) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="qepn_8h.html#aa6dc9adf3f51310aa41685019829374b">Q_ENTRY_SIG</a>: {</div>
<div class="line">            <span class="comment">/* arm timer (one-shot) at tick rate 0 */</span></div>
<div class="line">            <a class="code" href="qfn_8h.html#adbc1b10b5546d6441a823da4867f4692">QActive_armX</a>(&amp;me-&gt;super, 0U,</div>
<div class="line">                         CARS_GREEN_MIN_TOUT, 0U);</div>
<div class="line">            BSP_signalCars(CARS_GREEN);</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="qepn_8h.html#a6cf79ec599f6d7870aafe06c71de79be">Q_EXIT_SIG</a>: {</div>
<div class="line">            QActive_disarm(&amp;me-&gt;super)</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            break;</div>
<div class="line">        }</div>
<div class="line">        case <a class="code" href="qepn_8h.html#ab1a3d74abc659d49b63453c981aace18">Q_INIT_SIG</a>: {</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a>(&amp;Pelican_carsGreenNoPed);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">default</span>: {</div>
<div class="line">            status_ = <a class="code" href="qepn_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc">Q_SUPER</a>(&amp;Pelican_carsEnabled);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00456">456</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="acc54c1c6578d6cb53e2c8dd36370e3da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc54c1c6578d6cb53e2c8dd36370e3da">&#9670;&nbsp;</a></span>QActive_disarmX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QActive_disarmX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qfn_8h.html#struct_q_active">QActive</a> *const&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> const&#160;</td>
          <td class="paramname"><em>tickRate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disarm a time event. </p>
<dl class="section user"><dt>Description</dt><dd>The time event of the active object gets disarmed (stopped).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">me</td><td>pointer (see <a class="el" href="index.html#oop">Object Orientation</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tickRate</td><td>tick rate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You should <b>not</b> assume that the timeout event will not arrive after you disarm the time event. The timeout event could be already in the event queue. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00488">488</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a20ce310ce2ae2fea8db90609091c716e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20ce310ce2ae2fea8db90609091c716e">&#9670;&nbsp;</a></span>QF_maxActive_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> QF_maxActive_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of active objects in the application (# elements in QF_active[]) </p>
<dl class="section user"><dt>Description</dt><dd>This variable stores the number of active objects in the application. This is the number of elements (dimension of) the QF_active[] array. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00053">53</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="a206fde6616e95338e4c7647c7731563f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a206fde6616e95338e4c7647c7731563f">&#9670;&nbsp;</a></span>QF_readySet_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> volatile QF_readySet_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ready set of QF-nano. </p>
<dl class="section user"><dt>Description</dt><dd>The QF-nano ready set keeps track of active objects that are ready to run. The ready set represents each active object as a bit, with the bits assigned according to priorities of the active objects. The bit is set if the corresponding active object is ready to run (i.e., has one or more events in its event queue) and zero if the event queue is empty. The QF-nano ready set is one byte-wide, which corresponds to 8 active objects maximum. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00065">65</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="ae867b998c1825bc2e8b6cd0d1472afc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae867b998c1825bc2e8b6cd0d1472afc3">&#9670;&nbsp;</a></span>QF_timerSetX_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ad0906fbe05a45fbdb000c58fe8929e70">uint_fast8_t</a> volatile QF_timerSetX_[<a class="el" href="qfn_8h.html#a2b5eb0c96105f58726359f4fcfae9530">QF_MAX_TICK_RATE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timer set of QF-nano. </p>
<dl class="section user"><dt>Description</dt><dd>The QF-nano timer set keeps track of the armed time events. The timer set represents the timeout down-counter of each active object as a bit, with the bits assigned according to priorities of the active objects. The bit is set if the corresponding timeout down-counter is not zero (i.e., is counting down) and zero if the down-counter is zero. The QF-nano time event set is one byte-wide, which corresponds to 8 active objects maximum.<br  />
<br  />
The main use of the QF_timerSetX_ is to quickly determine that all time events are disarmed by testing (QF_timerSetX_[tickRate] == 0). If so, the CPU can go to longer sleep mode, in which the system clock tick ISR is turned off.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The test (QF_timerSet_[tickRate] == 0) must be always performed inside a CRITICAL SECTION. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00085">85</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
<a id="aa3858ca07b0233cb8d969680d13ae2ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3858ca07b0233cb8d969680d13ae2ac">&#9670;&nbsp;</a></span>QF_log2Lkup</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="qkn_2qfn__port_8h.html#a4f4cc7253c4d809b326498b40efd66d3">Q_ROM</a> QF_log2Lkup[16]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    0U, 1U, 2U, 2U, 3U, 3U, 3U, 3U,</div>
<div class="line">    4U, 4U, 4U, 4U, 4U, 4U, 4U, 4U</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Lookup table for (log2(n) + 1), where n is the index into the table. </p>
<p>This lookup delivers the 1-based number of the most significant 1-bit of a nibble. </p>

<p class="definition">Definition at line <a class="el" href="qfn_8c_source.html#l00089">89</a> of file <a class="el" href="qfn_8c_source.html">qfn.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aqfn_8h_html_ae00de7cd5eab428566fb510ed63fac6b"><div class="ttname"><a href="qfn_8h.html#ae00de7cd5eab428566fb510ed63fac6b">QACTIVE_POST_X</a></div><div class="ttdeci">#define QACTIVE_POST_X(me_, margin_, sig_, par_)</div><div class="ttdoc">Polymorphically posts an event to an active object (FIFO) without delivery guarantee (task context).</div><div class="ttdef"><b>Definition:</b> <a href="qfn_8h_source.html#l00226">qfn.h:226</a></div></div>
<div class="ttc" id="aqepn_8h_html_a54b2da5e70ef983cfa7ca74deac237a3"><div class="ttname"><a href="qepn_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a></div><div class="ttdeci">#define Q_HANDLED()</div><div class="ttdoc">Macro to call in a state-handler when it handles an event.</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00360">qepn.h:360</a></div></div>
<div class="ttc" id="aqepn_8h_html_ad141f4e9efcba4613f82a8b2c76663ad"><div class="ttname"><a href="qepn_8h.html#ad141f4e9efcba4613f82a8b2c76663ad">QState</a></div><div class="ttdeci">uint_fast8_t QState</div><div class="ttdoc">Type returned from a state-handler function.</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00155">qepn.h:155</a></div></div>
<div class="ttc" id="aqepn_8h_html_ab1a3d74abc659d49b63453c981aace18"><div class="ttname"><a href="qepn_8h.html#ab1a3d74abc659d49b63453c981aace18">Q_INIT_SIG</a></div><div class="ttdeci">#define Q_INIT_SIG</div><div class="ttdoc">signal for coding nested initial transitions</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00378">qepn.h:378</a></div></div>
<div class="ttc" id="aqfn_8h_html_afedb154580e5291936106181d89f84e4"><div class="ttname"><a href="qfn_8h.html#afedb154580e5291936106181d89f84e4">QACTIVE_POST_X_ISR</a></div><div class="ttdeci">#define QACTIVE_POST_X_ISR(me_, margin_, sig_, par_)</div><div class="ttdoc">Polymorphically posts an event to an active object (FIFO) without delivery guarantee (ISR context).</div><div class="ttdef"><b>Definition:</b> <a href="qfn_8h_source.html#l00275">qfn.h:275</a></div></div>
<div class="ttc" id="aqepn_8h_html_a6cf79ec599f6d7870aafe06c71de79be"><div class="ttname"><a href="qepn_8h.html#a6cf79ec599f6d7870aafe06c71de79be">Q_EXIT_SIG</a></div><div class="ttdeci">#define Q_EXIT_SIG</div><div class="ttdoc">signal for coding exit actions</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00375">qepn.h:375</a></div></div>
<div class="ttc" id="aqfn_8h_html_adbc1b10b5546d6441a823da4867f4692"><div class="ttname"><a href="qfn_8h.html#adbc1b10b5546d6441a823da4867f4692">QActive_armX</a></div><div class="ttdeci">void QActive_armX(QActive *const me, uint_fast8_t const tickRate, QTimeEvtCtr const nTicks, QTimeEvtCtr const interval)</div><div class="ttdoc">Arm the QP-nano one-shot time event.</div><div class="ttdef"><b>Definition:</b> <a href="qfn_8c_source.html#l00456">qfn.c:456</a></div></div>
<div class="ttc" id="aqepn_8h_html_ad8abd2f7098c41ec464343d9d8f1eadc"><div class="ttname"><a href="qepn_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc">Q_SUPER</a></div><div class="ttdeci">#define Q_SUPER(super_)</div><div class="ttdoc">Macro to call in a state-handler when it designates the superstate of a given state.</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00354">qepn.h:354</a></div></div>
<div class="ttc" id="aqepn_8h_html_aa6dc9adf3f51310aa41685019829374b"><div class="ttname"><a href="qepn_8h.html#aa6dc9adf3f51310aa41685019829374b">Q_ENTRY_SIG</a></div><div class="ttdeci">#define Q_ENTRY_SIG</div><div class="ttdoc">QP reserved signals.</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00372">qepn.h:372</a></div></div>
<div class="ttc" id="aqepn_8h_html_aa094e6aed843e73b91fc3879e79139d5"><div class="ttname"><a href="qepn_8h.html#aa094e6aed843e73b91fc3879e79139d5">Q_SIG</a></div><div class="ttdeci">#define Q_SIG(me_)</div><div class="ttdoc">Macro to access the signal of the current event of a state machine.</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00143">qepn.h:143</a></div></div>
<div class="ttc" id="aqepn_8h_html_a8f06cd90ba5060780fc61a4810e3eb50"><div class="ttname"><a href="qepn_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a></div><div class="ttdeci">#define Q_TRAN(target_)</div><div class="ttdoc">Macro to call in a state-handler when it executes a regular or and initial transition.</div><div class="ttdef"><b>Definition:</b> <a href="qepn_8h_source.html#l00336">qepn.h:336</a></div></div>
<div class="ttc" id="aqfn_8h_html_struct_q_active"><div class="ttname"><a href="qfn_8h.html#struct_q_active">QActive</a></div><div class="ttdoc">QActive active object (based on QHsm-implementation)</div><div class="ttdef"><b>Definition:</b> <a href="qfn_8h_source.html#l00120">qfn.h:120</a></div></div>
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QP-nano 6.8.0</b>
    </li>
  </ul>
</div>
</body>
</html>
