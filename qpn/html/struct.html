<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP-nano: Structure and Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a id="logo" title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com"></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QP-nano
   &#160;<span id="projectnumber">6.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('struct.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Structure and Features </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#files">Directories and Files</a></li>
<li class="level1"><a href="#comp">Components of QP-nano</a><ul><li class="level2"><a href="#comp_qep">QEP-nano Hierarchical Event Processor</a></li>
<li class="level2"><a href="#comp_qf">QF-nano Active-Object Framework</a></li>
<li class="level2"><a href="#comp_qv">QV-nano Cooperative Kernel</a></li>
<li class="level2"><a href="#comp_qk">QK-nano Preemptive Kernel</a></li>
</ul>
</li>
<li class="level1"><a href="#classes">Classes in QP-nano</a></li>
<li class="level1"><a href="#sm">State Machines</a></li>
<li class="level1"><a href="#coding">Coding Standard</a></li>
<li class="level1"><a href="#misra">MISRA Compliance</a></li>
<li class="level1"><a href="#pc-lint">PC-Lint Support</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="files"></a>
Directories and Files</h1>
<p>The following annotated directory tree lists the top-level directories provided in the standard QP-nano distribution.</p>
<ul class="tag">
<li>
<span class="img folder">qpn/</span>  <ul class="tag">
<li>
<span class="img folder">3rd_party/</span> &mdash; Third-Party code used in the QP-nano <a class="el" href="ports.html">ports</a> and <a class="el" href="exa.html">examples</a>  </li>
<li>
<span class="img folder">examples/</span> &mdash; <a class="el" href="exa.html">QP-nano Examples</a>  </li>
<li>
<span class="img folder">ports/</span> &mdash; <a class="el" href="ports.html">QP-nano Ports</a>  </li>
<li>
<span class="img folder">include/</span> &mdash; Platform-independent QP-nano API (see <a href="dir_d44c64559bbebec7f509842c48db8b23.html"><b>include</b></a>)  </li>
<li>
<span class="img folder">src/</span> &mdash; Platform-independent QP-nano source code (see <a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html"><b>src</b></a>)  </li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The standard QP-nano distribution contains many <a class="el" href="exa.html">Example Projects</a>, which are specifically designed to help you learn to use QP-nano and to serve you as starting points for your own projects.</dd></dl>
<hr  />
 <h1><a class="anchor" id="comp"></a>
Components of QP-nano</h1>
<p>The QP-nano active object framework is comprised of the following components:</p>
<div class="image">
<img src="qpn_components.jpg" alt=""/>
<div class="caption">
Components of the QP-nano Framework</div></div>
<div class="separate"></div> <h2><a class="anchor" id="comp_qep"></a>
QEP-nano Hierarchical Event Processor</h2>
<p>QEP-nano is a universal, UML-compliant event processor that enables developers to code UML state machines in highly readable ANSI-C, in which every state machine element is mapped to code precisely, unambiguously, and exactly once (traceability). QEP-nano fully supports hierarchical state nesting, which is the fundamental mechanism for reusing behavior across many states instead of repeating the same actions and transitions over and over again. (See also <a class="el" href="group__qepn.html">QEP-nano</a>).</p>
<div class="separate"></div> <h2><a class="anchor" id="comp_qf"></a>
QF-nano Active-Object Framework</h2>
<p>QF-nano is a portable, event-driven, active-object (actor) framework for execution of <b>active objects</b> (concurrent state machines) specifically designed for real-time embedded (RTE) systems. (See also <a class="el" href="group__qfn.html">QF-nano</a>).</p>
<div class="separate"></div> <h2><a class="anchor" id="comp_qv"></a>
QV-nano Cooperative Kernel</h2>
<p>QV-nano is a simple <b>cooperative</b> kernel (previously called "Vanilla" kernel). This kernel executes active objects one at a time, with priority-based scheduling performed before processing of each event. Due to naturally short duration of event processing in state machines, the simple QV kernel is often adequate for many real-time systems. (See also <a class="el" href="group__qvn.html">QV-nano</a>).</p>
<div class="separate"></div> <h2><a class="anchor" id="comp_qk"></a>
QK-nano Preemptive Kernel</h2>
<p>QK-nano is a tiny <b>preemptive</b>, priority-based, non-blocking, real-time kernel designed specifically for executing active objects. QK-nano meets all the requirement of the <a href="http://en.wikipedia.org/wiki/Rate-monotonic_scheduling" class="extern" target="_blank"><b>Rate Monotonic Scheduling</b></a> (a.k.a. Rate Monotonic Analysis &mdash; RMA) and can be used in hard real-time systems. (See also <a class="el" href="group__qkn.html">QK-nano</a>).</p>
<hr  />
 <h1><a class="anchor" id="classes"></a>
Classes in QP-nano</h1>
<p>The figure below shows the main classes comprising the QP-nano framework and their relation to the application-level code, such as the <a class="el" href="game.html">"Fly 'n' Shoot" Game</a> example application.</p>
<div class="image">
<img src="qpn_classes.gif" alt=""/>
<div class="caption">
Main Classes in the QP-nano Framework</div></div>
<ul class="tag">
<li>
<p class="startli"><span class="tag">0</span> The <a class="el" href="qepn_8h.html#struct_q_evt" title="Event structure.">QEvt</a> class represents events, possibly with a parameter (the existence of event parameter is configured by the macro <a class="el" href="qpn__conf_8h.html#a44b94e1d4ae451b6c67d6503999714a8" title="The size (in bytes) of the single scalar parameter representation in the QEvent struct.">Q_PARAM_SIZE</a>). </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="tag">1</span> The abstract <a class="el" href="qepn_8h.html#struct_q_hsm" title="Hierarchical State Machine.">QHsm</a> class represents a Hierarchical State Machine (HSM) with full support for hierarchical nesting of states, entry/exit actions, initial transitions, and transitions to history in any composite state. This class is designed for ease of manual coding of HSMs in C, but it is also supported by the <a href="https://www.state-machine.com/qm" class="extern" target="_blank">QM modeling tool</a>. The class is abstract, meaning that it is not designed to be instantiated directly, but rather only for inheritance. The <a class="el" href="game.html">"Fly 'n' Shoot" Game</a> application provides an example of application-level classes deriving directly from <a class="el" href="qepn_8h.html#struct_q_hsm" title="Hierarchical State Machine.">QHsm</a> (see [5]). </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="tag">2</span> The abstract <a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> class represents an active object that uses the <a class="el" href="qepn_8h.html#struct_q_hsm" title="Hierarchical State Machine.">QHsm</a> style state machine implementation strategy. This strategy is tailored to manual coding, but it is also supported by the QM modeling tool. The <a class="el" href="game.html">"Fly 'n' Shoot" Game</a> application provides an example of application-level classes deriving directly from <a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> (see [4]). </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="tag">3</span> <a class="el" href="qfn_8h.html#struct_q_active_c_b" title="QActive Control Block.">QActiveCB</a> (<a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> Control Block) represents the read-only (constant) information that the QF-nano needs to manage the active object. <a class="el" href="qfn_8h.html#struct_q_active_c_b" title="QActive Control Block.">QActiveCB</a> objects are grouped in the array <a class="el" href="qfn_8h.html#a4b698945847395139338d141dd394520">QF_active</a>, which typically can be placed in ROM. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="tag">4</span> Active Objects in the application derive from the <a class="el" href="qfn_8h.html#struct_q_active" title="QActive active object (based on QHsm-implementation)">QActive</a> base class. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="tag">5</span> Applications can also use classes derived directly from the <a class="el" href="qepn_8h.html#struct_q_hsm" title="Hierarchical State Machine.">QHsm</a> base class to represent "raw" state machines that are not active objects, because they don't have event queue and execution thread. Such "raw" state machines are typically used as "Orthogonal Components". </p>
<p class="endli"></p>
</li>
</ul>
<hr  />
 <h1><a class="anchor" id="sm"></a>
State Machines</h1>
<p>The behavior of each active object in QP-nano is specified by means of a <a href="https://www.state-machine.com/doc/concepts#HSM" target="_blank" class="extern">hierarchical state machine</a> (UML statechart), which is the most effective and elegant technique of describing event-driven behavior. The most important innovation of UML state machines over classical finite state machines (FSMs) is the hierarchical state nesting. The value of state nesting lies in avoiding repetitions, which are inevitable in the traditional "flat" FSM formalism and are the main reason for the "state-transition explosion" in FSMs. The semantics of state nesting allow substates to define only the differences of behavior from the superstates, thus promoting sharing and reusing behavior.</p>
<p>
<div class="image">
<a target="_blank" href="https://www.state-machine.com/doc/AN_Crash_Course_in_UML_State_Machines.pdf"><img border="0" src="img/AN_Crash_Course_in_UML_State_Machines.jpg" title="Download PDF"></a>
<div class="caption">
Application Note: A Crash Course in UML State Machines
</div>
</div>
</p>
<p>The Quantum Leaps Application Note <a href="https://www.state-machine.com/doc/AN_Crash_Course_in_UML_State_Machines.pdf" class="extern" target="_blank"><b>A Crash Course in UML State Machines</b></a> introduces the main state machine concepts backed up by examples. </p><div class="clear"></div><dl class="section note"><dt>Note</dt><dd>The hallmark of the QP-nano implementation of UML state machines is <b>traceability</b>, which is direct, precise, and unambiguous mapping of every state machine element to human-readable, portable, MISRA-compliant C code. Preserving the traceability from requirements through design to code is essential for mission-critical systems, such as medical devices or avionic systems.</dd></dl>
<hr  />
 <h1><a class="anchor" id="coding"></a>
Coding Standard</h1>
<p>The QP-nano framework has been developed in strict adherence to the documented <a href="https://www.state-machine.com/doc/AN_QL_Coding_Standard.pdf" class="extern" target="_blank"><b>Quantum Leaps Coding Standard</b></a>.</p>
<p>
<div class="image">
<a target="_blank" href="https://www.state-machine.com/doc/AN_QL_Coding_Standard.pdf"><img border="0" src="img/AN_Coding_Standard.jpg " title="Download PDF"></a>
<div class="caption">
Application Note: Quantum Leaps C/C++ Coding Standard
</div>
</div>
</p>
<hr  />
 <h1><a class="anchor" id="misra"></a>
MISRA Compliance</h1>
<p>The QP-nano framework complies with most of the Motor Industry Software Reliability Association (MISRA) MISRA-C:2004 rules. </p>
<p>
<div class="image">
<a target="_blank" href="https://www.state-machine.com/doc/AN_QP-nano_MISRA.pdf"><img border="0" src="img/AN_MISRA-QPn.jpg" title="Download PDF"></a>
<div class="caption">
Application Note: QP-nano MISRA-C:2004 Compliance Matrix
</div>
</div>
</p>
<p>All deviations are carefully limited into very specific contexts and are documented with the Application Note: <a href="https://www.state-machine.com/doc/AN_QP-nano_MISRA.pdf" class="extern" target="_blank"><b>QP-nano MISRA-C:2004 Compliance Matrix</b></a>.</p>
<dl class="section note"><dt>Note</dt><dd>MISRA and MISRA C are registered trademarks of MIRA Ltd, held on behalf of the MISRA Consortium.</dd></dl>
<p>The MISRA guidelines place great emphasis on the use of static code analysts tools to check compliance with the MISRA-C language subset. To this end, QP-nano comes with an extensive support for automatic rule checking with <a class="el" href="lint.html">PC-Lint</a>. The QP frameworks go even beyond MISRA, by complying with the <b>strict type checking</b> of PC-Lint.</p>
<hr  />
 <h1><a class="anchor" id="pc-lint"></a>
PC-Lint Support</h1>
<p>The QP-nano framework comes with extensive support for automatic rule checking by means of <a href="http://www.gimpel.com/" class="extern" target="_blank">PC-Lint</a>, which is designed not just for proving compliance of the QP-nano framework code, but more importantly, to aid in checking compliance of the application-level code. Any organization engaged in designing safety-related embedded software could benefit from the unprecedented quality infrastructure built around the QP-nano framework.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="lint.html">Lint Port</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QP-nano 6.8.0</b>
    </li>
  </ul>
</div>
</body>
</html>
