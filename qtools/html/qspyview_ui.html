<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QTools: QSpyView User Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a id="logo" title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com"></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QTools
   &#160;<span id="projectnumber">6.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('qspyview_ui.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">QSpyView User Interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qspyview_file">File Menu</a></li>
<li class="level1"><a href="#qspyview_view">View Menu</a></li>
<li class="level1"><a href="#qspyview_filters">Filters Menu</a><ul><li class="level2"><a href="#qspyview_global">Setting Global Filters</a></li>
<li class="level2"><a href="#qspyview_local">Setting Local Filters</a></li>
<li class="level2"><a href="#qspyview_ao">Setting Active Object Filter</a></li>
</ul>
</li>
<li class="level1"><a href="#qspyview_commands">Commands Menu</a><ul><li class="level2"><a href="#qspyview_user">Executing User Command</a></li>
<li class="level2"><a href="#qspyview_peek">Peek Command</a></li>
<li class="level2"><a href="#qspyview_poke">Poke Command</a></li>
</ul>
</li>
<li class="level1"><a href="#qspyview_events">Events Menu</a></li>
<li class="level1"><a href="#qspyview_custom">Custom Menu</a></li>
<li class="level1"><a href="#qspyview_help">Help Menu</a></li>
</ul>
</div>
<div class="textblock"><p>The <span class="img file_wish">qspyview.tcl</span> script provides a simple Graphical User Interface (GUI) consisting of the main menu, the text view, the canvas view, and the status bar. </p>
<div class="image">
<img src="qspyview.gif" alt=""/>
<div class="caption">
QSpyView user interface</div></div>
<p>The main menu includes several useful commands, which are quickly reviewed and the following sections. The main menu might subsequently be augmented in your own <a class="el" href="qspyview_cust.html">customizations</a>.</p>
<hr  />
 <h1><a class="anchor" id="qspyview_file"></a>
File Menu</h1>
<p>The File menu provides interface to the <a class="el" href="qspy.html#qspy_saving">QSPY saving files</a> feature. This menu allows you to trigger QSPY to save <a class="el" href="qspy_dict.html">dictionaries</a>, as well as to open/close all other file formats supported by QSPY.</p>
<div class="image">
<img src="qspyview_file.gif" alt=""/>
</div>
<hr  />
 <h1><a class="anchor" id="qspyview_view"></a>
View Menu</h1>
<p>The View menu allows you to toggle (show/hide) the two main views: the Text view and the Canvas view.</p>
<div class="image">
<img src="qspyview_view.gif" alt=""/>
<div class="caption">
Text-view and Canvas-view menus</div></div>
<div class="image">
<img src="qspyview_canvas.gif" alt=""/>
<div class="caption">
Canvas-view enabled</div></div>
<div class="image">
<img src="qspyview_no_text.gif" alt=""/>
<div class="caption">
Text-view disabled</div></div>
<dl class="section note"><dt>Note</dt><dd>The provided screen shots of the Text-view and the Canvas-view are specific to the DPP example application (see <a class="el" href="qspyview_cust.html">Customizing and Extending QSpyView</a>).</dd></dl>
<hr  />
 <h1><a class="anchor" id="qspyview_filters"></a>
Filters Menu</h1>
<p>The Filters menu opens dialog boxes through which you can set the QSPY filters.</p>
<div class="image">
<img src="qspyview_filters.gif" alt=""/>
</div>
<div class="separate"></div> <h2><a class="anchor" id="qspyview_global"></a>
Setting Global Filters</h2>
<p>The Q-SPY Global Filter dialog box allows you to turn each individual global trace record on and off. The Global Filter has two main components: the standard Q-SPY trace records (see <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5" title="Quantum Spy record types.">QSpyRecords</a>), and the User-specific trace records (starting with the offset <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a>). The User QS Records are visible when you <b>scroll down</b> the "Global Filters" dialog box.</p>
<div class="image">
<img src="qspyview_global.gif" alt=""/>
</div>
<dl class="section note"><dt>Note</dt><dd>The "Global Filter" dialog box does not show the "Miscellaneous" QS trace records (such as <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5f687e318f1a2ceb58d765e1518b4f63" title="object dictionary entry">QS_OBJ_DICT</a>, <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6a73ed1da89600585ca91b5572941ea4" title="reports the Target information">QS_TARGET_INFO</a>, etc.), because these trace records are "not maskable", meaning that they are always enabled and cannot be turned off by the Global Filter.</dd></dl>
<div class="separate"></div> <h2><a class="anchor" id="qspyview_local"></a>
Setting Local Filters</h2>
<p>The Q-SPY Local Filter dialog box allows you to set each individual local filter.</p>
<div class="image">
<img src="qspyview_local.png" alt=""/>
</div>
<dl class="section note"><dt>Note</dt><dd>The dialog box accepts the addresses of the objects in decimal and in hexadecimal (with the <code>0x</code> prefix), as shown in the screen-shot above.</dd></dl>
<div class="separate"></div> <h2><a class="anchor" id="qspyview_ao"></a>
Setting Active Object Filter</h2>
<p>The "Active Object" filter is a shortcut to setting the Q-SPY local filter for a given active object in the Target. Specifically, the "Active Object" filter sets the two local filters <a class="el" href="qs__copy_8h.html#a2b49bf6045b1294330455dd0b4fcab88" title="Local Filter for a given active object obj_.">QS_FILTER_AO_OBJ</a> and <a class="el" href="qs__copy_8h.html#a17b622a80eec603c8cd1d81f3b319a42" title="Local Filter for a given state machine object obj_.">QS_FILTER_SM_OBJ</a> to the same Active Object with the specified priority (<b>NOTE:</b> Each Active Object has a unique priority in QP).</p>
<div class="image">
<img src="qspyview_ao.png" alt=""/>
<div class="caption">
setting Active Object filter to AO with priority 6</div></div>
   <hr  />
 <h1><a class="anchor" id="qspyview_commands"></a>
Commands Menu</h1>
<p>The Commands menu allows you to execute simple commands (without parameters) in the Target, such as Reset the Target, Query the Target, and clock Tick at rate 0 and rate 1. Also, this menu allows you to execute commands with parameters, which are quickly discussed below</p>
<div class="image">
<img src="qspyview_commands.png" alt=""/>
</div>
   <div class="separate"></div> <h2><a class="anchor" id="qspyview_user"></a>
Executing User Command</h2>
<p>The "User Command..." menu allows you to invoke a command in the Target and pass up to three parameters to this command. (<b>NOTE:</b> a command is an application-specific callback function that the QS-RX component executes in the Target).</p>
<p>The following screen shot shows how to execute User Command number <code>21</code> with the parameters: <code>111</code>, <code>0x222</code> and <code>333</code>. Both the command number and the parameters can be specified in hexadecimal (with the <code>0x</code> prefix).</p>
<div class="image">
<img src="qspyview_cmd.png" alt=""/>
</div>
   <div class="separate"></div> <h2><a class="anchor" id="qspyview_peek"></a>
Peek Command</h2>
<p>The Peek Obj/Addr... command opens a dialog box, in which you can provide the Target object or address (RAM or ROM) (<b>NOTE:</b> You can provide either the object name, which must be known by its object-dictionary, or numerical address, which <b>must</b> be a valid RAM/ROM address, or the Target might crash.)</p>
<p>As shown in the screen shot below, the PEEK command takes additionally the offset into the object [bytes], the size of the item [1/2/4 bytes] and the number of units (1..255) you wish to "peek".</p>
<div class="image">
<img src="qspyview_peek.png" alt=""/>
</div>
   <p><br  />
 The Target responds with a <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5aecac2f03345ae0df0ba1421a5d3c8e8b" title="reports the data from the PEEK query">QS_PEEK_DATA</a> trace record, which you can view in QSPY human-readable output (the packet is also sent to QSpyView, where you can react to it in your <a class="el" href="qspyview_cust.html">customization</a>.)</p>
<pre class="fragment">           Trg-Ack  QS_RX_CURR_OBJ
3558939043 Trg-Peek Offs=0,Size=4,Num=10,Data=&lt;00012345,00000000,00000000,00000000,0000000
0,00000000,00000000,00000000,00000000,00000000&gt;
</pre><dl class="section note"><dt>Note</dt><dd>The Peek Command can be used to view any <b>readable</b> address, such as ROM, RAM, and also <b>peripheral registers</b> in your Target.</dd></dl>
<div class="separate"></div> <h2><a class="anchor" id="qspyview_poke"></a>
Poke Command</h2>
<p>The "Poke Obj/Addr..." command allows you to write data to the specified object or address in Target's RAM (<b>NOTE:</b> You can provide either the object name, which must be known by its object-dictionary, or numerical address, which <b>must</b> be a valid RAM address, or the Target might crash.)</p>
<p>As shown in the screen shot below, the POKE command takes additionally the offset into the object [bytes], the <b>format</b> of the data (c for byte, s for little-endian uint16_t, S for big-endian uint16_t, i for little-endian uint32_t and I for big-endian uint32_t) and the data (might be in hex).</p>
<div class="image">
<img src="qspyview_poke.png" alt=""/>
</div>
   <p><br  />
 The Target responds with <code>Trg-Ack QS_RX_CURR_OBJ</code> and <code>Trg-Ack QS_RX_POKE</code>. The qspy output below shows additionally an output generated by the PEEK command that verifies that the value <code>0xDEAD</code> has been poked into the object.</p>
<pre class="fragment">           Trg-Ack  QS_RX_CURR_OBJ
           Trg-Ack  QS_RX_POKE
           Trg-Ack  QS_RX_CURR_OBJ
3953414540 Trg-Peek Offs=0,Size=4,Num=10,Data=&lt;00012345,0000DEAD,00000000,00000000,0000000
0,00000000,00000000,00000000,00000000,00000000&gt;
</pre><dl class="section note"><dt>Note</dt><dd>The Poke Command can be used to change any <b>writable</b> address, such as RAM, but also <b>peripheral registers</b> in your Target.</dd></dl>
<hr  />
 <h1><a class="anchor" id="qspyview_events"></a>
Events Menu</h1>
<p>The "Generate Event..." menu allows you to send an arbitrary event (with up to 10 different parameters) to the Target. The event will be either posted directly to the specified Active Object, or it will be published.</p>
<p>As shown in the screen-shot below, you need to provide the <code>prio</code> of the recipient active object. (If <code>prio</code> is greater than zero, the event will be posted directly to the AO with that priority, otherwise the event will be published). You also need to specify the numerical value of the event signal (<code>sig</code>).</p>
<div class="image">
<img src="qspyview_event.png" alt=""/>
</div>
   <p>The optional "Event Parameters" section allows you to specify up to 10 arbitrary parameters. Each parameter is specified as a pair of <b>format</b> followed by data. The format is any valid specification of the format for the <a href="http://www.tcl.tk/man/tcl8.4/TclCmd/binary.htm" target="_blank" class="extern">binary format</a> Tcl command. For example, here the format <code>c</code> means a byte, while the format <code>i</code> means that the <code>data</code> should be encoded as 32-bit integer in little-endian byte order. (<b>NOTE:</b> The endianness you specify in the <code>format</code> field must match the endianness of the Target.</p>
<dl class="section attention"><dt>Attention</dt><dd>All the specified parameters are appended to the event packet for the target in the exact order and the specified binary format. If the event structure is represented in the Target memory with some <b>padding</b>, you need to provide such padding explicitly (as one of the parameters).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The main purpose of the "Generate Event..." menu is to allow you to determine experimentally the correct format of events that you wish to inject into the Target. Once the correct format has been confirmed, you can generate the events programmatically in your <a class="el" href="qspyview_cust.html">customization</a>.</dd></dl>
<hr  />
 <h1><a class="anchor" id="qspyview_custom"></a>
Custom Menu</h1>
<p>This top-level menu is provided for your customization. It's intent is to let you add your own commands in your script.</p>
<div class="image">
<img src="qspyview_custom.gif" alt=""/>
</div>
<hr  />
 <h1><a class="anchor" id="qspyview_help"></a>
Help Menu</h1>
<p>This menu allows you to access the online Q-SPY help in HTML, and also allows you to open the "About" dialog box.</p>
<div class="image">
<img src="qspyview_help.gif" alt=""/>
</div>
<hr  />
<p><b>Next:</b> <a class="el" href="qspyview_cust.html">Customizing and Extending QSpyView</a></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QTools 6.8.0</b>
    </li>
  </ul>
</div>
</body>
</html>
