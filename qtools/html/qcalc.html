<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QTools: QCalc Programmer&#39;s Calculator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a id="logo" title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com"></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QTools
   &#160;<span id="projectnumber">6.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('qcalc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">QCalc Programmer's Calculator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qcalc_usage">QCalc Usage</a><ul><li class="level2"><a href="#qcalc_win">QCalc on Windows</a></li>
<li class="level2"><a href="#qcalc_linux">QCalc on Linux</a></li>
</ul>
</li>
<li class="level1"><a href="#qcalc_features">QCalc Features</a><ul><li class="level2"><a href="#qcalc_expr">Expressions in C-Syntax</a></li>
<li class="level2"><a href="#qcalc_conv">Automatic conversion to hexadecimal and binary</a></li>
<li class="level2"><a href="#qcalc_bin">Binary constants</a></li>
<li class="level2"><a href="#qcalc_hist">History of inputs</a></li>
<li class="level2"><a href="#qcalc_ans">The $ans variable</a></li>
<li class="level2"><a href="#qcalc_var">User variables</a></li>
<li class="level2"><a href="#qcalc_error">Error handling</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><b>QCalc</b> is a powerful, cross-platform calculator specifically designed for embedded systems programmers. The calculator accepts <em>whole expressions</em> in the <a class="el" href="qcalc.html#qcalc_expr">C-syntax</a> and displays results simultaneously in decimal, hexadecimal, and binary without the need to explicitly convert the result to these bases. </p>
<div class="image">
<img src="qcalc.png" alt=""/>
<div class="caption">
QCalc user interface</div></div>
<dl class="section note"><dt>Note</dt><dd>The calculator GUI provides a resizable <em>user input</em> filed, where you can type <b>complete C expressions</b>. You can also <b>copy-and-paste</b> expressions into and from the <em>input filed</em> to use them directly in <b>your C code</b>.</dd></dl>
<hr  />
 <h1><a class="anchor" id="qcalc_usage"></a>
QCalc Usage</h1>
<p><b>QCalc</b> is included in the QTools Collection in the sub-directory <span class="img folder">qtools/bin/</span> and consists of a single file <b>qcalc.tcl</b>. To launch QCalc, you need to open this file with the <span class="img file_wish">wish</span> Tk interpreter.</p>
<dl class="section note"><dt>Note</dt><dd>The <span class="img file_wish">wish</span> Tk interpreter is included in the QTools collection for Windows and is also pre-installed in most Linux distributions.</dd></dl>
<p>You use QCalc by typing (or pasting) an expression in the <em>user input</em> field and pressing <span class="img key_ret">Enter</span> to evaluate the expression. You can conveniently edit any expression already inside the <em>user input</em> field, and you can recall the previous expressions by means of the <span class="img key_up">Up</span> and <span class="img key_down">Down</span> keys. You can also resize the QCalc window to see more or less of the <em>input field</em>.</p>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_win"></a>
QCalc on Windows</h2>
<p>The <span class="img file_wish">wish</span> Tk interpreter is conveniently provided in the same <span class="img folder">qtools/bin/</span> directory as the <span class="img file_tcl">qcalc.tcl</span> script. The directory contains also a shortcut <span class="img file_wish">qcalc</span>, which you can copy to your desktop.</p>
<div class="image">
<img src="qcalc_lnk.png" alt=""/>
<div class="caption">
Shortcut for launching QCalc on Windows</div></div>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_linux"></a>
QCalc on Linux</h2>
<p>Most Linux distributions contain the Tk interpreter, which you can use to launch QCalc. You can do this either from a terminal, by typing <code>wish $QTOOLS/qcalc.tcl &amp;</code> or by creating a shortcut to <code>wish</code> with the command-line argument <code>$QTOOLS/qcalc.tcl</code>.</p>
<div class="image">
<img src="qcalc_linux.png" alt=""/>
<div class="caption">
Calc on Linux</div></div>
<hr  />
 <h1><a class="anchor" id="qcalc_features"></a>
QCalc Features</h1>
<h2><a class="anchor" id="qcalc_expr"></a>
Expressions in C-Syntax</h2>
<p>The most important feature of QCalc is that it accepts expressions in the <b>C-syntax</b> &ndash; with the same operands and precedence rules as in the C or C++ source code. Among others, the expressions can contain all bit-wise operators (<code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>|</code>, <code>&amp;</code>, <code>^</code>, <code>~</code>) as well as mixed decimal, <b>hexadecimal</b> and even <a class="el" href="qcalc.html#qcalc_bin">binary</a> constants. QCalc is also a powerful floating-point scientific calculator and supports all mathematical functions (<code>sin()</code>, <code>cos()</code>, <code>tan()</code>, <code>exp()</code>, <code>ln()</code>, ...). Some examples of acceptable expressions are:</p>
<p><code>((0xBEEF &lt;&lt; 16) | 1280) &amp; ~0xFF</code><span class="img key_ret"></span> &ndash; binary operators, mixed hex and decimal numbers<br  />
<code>($1011 &lt;&lt; 24) | (1280 &gt;&gt; 8) ^ 0xFFF0</code><span class="img key_ret"></span> &ndash; mixed <a class="el" href="qcalc.html#qcalc_bin">binary</a>, dec and hex numbers<br  />
<code>(1234 % 55) + 4321/33</code><span class="img key_ret"></span> &ndash; remainder, integer division<br  />
<code>pow(sin($pi),2) + pow(cos($pi),2)</code><span class="img key_ret"></span> &ndash; scientific floating-point calculations, pi-constant<br  />
<code>($0111 &amp; $GPIO_EXTIPINSELL_EXTIPINSEL0_MASK) &lt;&lt; ($GPIO_EXTIPINSELL_EXTIPINSEL1_SHIFT * 12)</code><span class="img key_ret"></span> - <a class="el" href="qcalc.html#qcalc_var">user defined variables</a><br  />
 </p><dl class="section note"><dt>Note</dt><dd>QCalc internally uses the Tcl command <b>expr</b> to evaluate the expressions. Please refer to the documentation of the <a href="http://www.tcl.tk/man/tcl8.4/TclCmd/expr.htm" target="_blank" class="extern">Tcl <b>expr</b> command</a> for more details of supported syntax and features.</dd></dl>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_conv"></a>
Automatic conversion to hexadecimal and binary</h2>
<p>If the result of expression evaluation is integer (as opposed to floating point), QCalc automatically displays the result in hexadecimal and binary formats (see QCalc GUI). For better readability the hex display shows a comma between the two 16-bit half-words (e.g., <code>0xDEAD,BEEF</code>). Similarly, the binary output shows a comma between the four 8-bit bytes (e.g., <code>0b11011110,10101101,10111110,11101111</code>).</p>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_bin"></a>
Binary constants</h2>
<p>As the extension to the C-syntax, QCalc supports <b>binary numbers</b> in the range from 0-15 (0b0000-0b1111). These binary constants are represented as <code>$0000</code>, <code>$0001</code>, <code>$0010</code>,..., <code>$1110</code>, and <code>$1111</code> and can be mixed into expressions. Here are a few examples of such expressions:</p>
<p><code>($0110 &lt;&lt; 14) &amp; 0xDEADBEEF</code><span class="img key_ret"></span><br  />
<code>($0010 | $1000) * 123</code><span class="img key_ret"></span><br  />
</p>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_hist"></a>
History of inputs</h2>
<p>QCalc remembers the history of up to 8 most recently entered expressions. You can recall and navigate the history of previously entered expressions by pressing the <span class="img key_up">Up</span> / <span class="img key_down">Down</span> keys.</p>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_ans"></a>
The $ans variable</h2>
<p>QCalc stores the result of the last computation in the <b>$ans</b> variable (note the dollar sign <code>$</code> in front of the variable name). Here are some examples of expressions with the <code>$ans</code> variable:</p>
<p><code>1/$ans</code><span class="img key_ret"></span> &ndash; find the inverse of the last computation<br  />
<code>log($ans)/log(2)</code><span class="img key_ret"></span> &ndash; find log-base-2 of the last computation<br  />
 </p><div class="separate"></div> <h2><a class="anchor" id="qcalc_var"></a>
User variables</h2>
<p>QCalc allows you also to define any number of your own <b>user variables</b>. To set a variable, you simply type the expression <code>=alpha</code> in the <em>user input</em> field. This will define the variable <code>alpha</code> and assign it the value of the last computation (<code>$ans</code>). Subsequently, you can use your <code>alpha</code> variable in expressions by typing <b>$</b><code>alpha</code> (note the dollar sign <code>$</code> in front of the variable name). Here is example of defining and using variable <code>$GPIO_BASE</code>:</p>
<p><code>0xE000E000</code><span class="img key_ret"></span> &ndash; set some value into <code>$ans</code><br  />
<code>=GPIO_BASE</code><span class="img key_ret"></span> &ndash; define user variable <code>GPIO_BASE</code> and set it to <code>$ans</code><br  />
<code>$GPIO_BASE + 0x400</code><span class="img key_ret"></span> &ndash; use the variable <code>$GPIO_BASE</code> in an expression<br  />
</p>
<dl class="section note"><dt>Note</dt><dd>The names of user variables are case-sensitive.</dd></dl>
<div class="separate"></div> <h2><a class="anchor" id="qcalc_error"></a>
Error handling</h2>
<p>Expressions that you enter into QCalc might have all kinds of errors: syntax errors, computation errors (e.g., division by zero), undefined variable errors, etc. In all these cases, QCalc responds with the <code>Error</code> message and the explanation of the error:</p>
<div class="image">
<img src="qcalc_err.png" alt=""/>
<div class="caption">
QCalc reacting to a syntax error</div></div>
<hr  />
<p><b>Next:</b> <a class="el" href="qfsgen.html">QFSGen ROM File-System Generator</a></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QTools 6.8.0</b>
    </li>
  </ul>
</div>
</body>
</html>
